/* (c) 2008-2012 Add This, LLC */
(function(){var _1;function validateUrl(a){return(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/).test(a);}function validateEmail(b){if(b.split("@").length!=2||b.indexOf(".")==-1||b.length>256){return false;}var a=new RegExp("^[a-z0-9,!#$%&'*+/=?^_`{|}~-]+(.[a-z0-9,!#$%&'*+/=?^_`{|}~-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*.([a-z]{2,})$");return String(b.toLowerCase()).search(a)!=-1;}function isEmpty(b){for(var a in b){if(b.hasOwnProperty(a)){return false;}}return true;}function get(a){if(typeof(a)=="string"){a=document.getElementById(a);}return a;}function anchor(a){return"<a name=\""+a+"\"></a>";}function div(f,a,d,b){return"<div "+(d===1?"class":"id")+"=\""+f+"\""+(a===0?" style=\"display:none\"":"")+(b?b:"")+">";}function span(d,b,a){return"<span "+(b===true?"class":"id")+"=\""+d+"\""+(a?a:"")+">";}function label(a,c,b){if(!c){c="";}return"<label for=\""+c+"\">"+a+":"+(b?"  <span>("+b+")</span>":"")+"</label>";}function setStyle(c,b,a){c=get(c);if(c){c.style[b]=a;}}function hide(c,a,b){if(!b){setStyle(c,"display","none");}if(a){setStyle(c,"visibility","hidden");}}function show(c,a,b){if(!b){setStyle(c,"display","block");}if(a){setStyle(c,"visibility","visible");}}function addClass(a,b){a=get(a);if(a){if(!a.className){a.className=b;}else{if(a.className.indexOf(b)==-1){a.className+=" "+b;}}}}function removeClass(a,b){a=get(a);if(a){if(!a.className){return;}if(a.className.indexOf(b)!=-1){a.className=a.className.split(b).join(" ");}}}function hasClass(a,b){a=get(a);if(a){if(!a.className){return false;}return(a.className.indexOf(b)!=-1);}}function setWidth(b,a){setStyle(b,"width",a+"px");}function setHeight(b,a){setStyle(b,"height",a+"px");}function isVisible(a){a=get(a);if(a){return a.style.display=="block";}return false;}function area(e){var h=window,f=document,g=f.documentElement,j=f.body,b=0,i=0,c=0,a=0;if(e){if(h.innerHeight&&h.scrollMaxY){b=j.scrollWidth;i=h.innerHeight+h.scrollMaxY;}else{if(j.scrollHeight>j.offsetHeight){b=j.scrollWidth;i=j.scrollHeight;}else{b=j.offsetWidth;i=j.offsetHeight;}}}if(self.innerHeight){c=self.innerWidth;a=self.innerHeight;}else{if(g&&g.clientHeight){c=g.clientWidth;a=g.clientHeight;}else{if(j&&(j.clientWidth||j.clientHeight)){c=j.clientWidth;a=j.clientHeight;}else{if(j){c=j.clientWidth;a=j.clientHeight;}}}}return[(e!==true||b<c?c:b),(e!==true||i<a?a:i)];}function spos(){var a=window,c=document,e=c.documentElement,b=c.body;if(typeof(a.pageYOffset)=="number"){return[a.pageXOffset,a.pageYOffset];}else{if(b&&(b.scrollLeft||b.scrollTop)){return[b.scrollLeft,b.scrollTop];}else{if(e&&(e.scrollLeft||e.scrollTop)){return[e.scrollLeft,e.scrollTop];}else{return[0,0];}}}}function abpos(f){var h=document.documentElement,d=0,j=0,i=0,g=0;do{i=/fixed/.test(f.style.position);g|=i;d+=f.offsetTop||0;j+=f.offsetLeft||0;if(i&&f){d+=f.scrollTop;j+=f.scrollLeft;}f=f.offsetParent;}while(f);if(!_ate.bro.ie6&&h.scrollTop&&g){d+=h.scrollTop;j+=h.scrollLeft;}return[j,d];}var _3a=(_ate.bro.msi?20:_1);function sbwidth(){if(_3a){return _3a;}try{var k=document,h=k.ce("div"),f=k.ce("div"),l=(k.getElementsByTagName("body"))[0],i=h.style;i.width="50px";i.height="50px";i.overflow="hidden";i.position="absolute";i.top="-200px";i.left="-200px";f.style.height="100px";l.appendChild(h);h.appendChild(f);var g=f.innerWidth;h.style.overflow="scroll";var c=f.innerWidth;h.removeChild(f);l.removeChild(h);if(!g||!c){_3a=20;}else{_3a=g-c;}}catch(j){_3a=20;}return _3a;}function cancelBubble(a){if(a){a.cancelBubble=true;if(a.preventDefault){a.preventDefault();}}}if(!window._atab){_ate.util.extend(_ate,{com:function(m){if(window.parent&&window.postMessage){window.parent.postMessage(m,"*");}else{_ate.ifm(m);}},ifm:function(m){if(addthis_wpl){var a=(addthis_wpl.split("#"))[0];window.parent.location.href=a+"#at"+m;}return false;}});window._atab={books:{"gmail":"Gmail","yahoo":"Yahoo!"},tdo:{ga:function(id){var r=[];if(id){var e=get(id),c=e.childNodes;if(c&&e.hasChildNodes()){for(var i=0;i<c.length;i++){var o=c.item(i);if(o.tagName.toLowerCase()=="a"&&o.style.display!="none"){r.push(o);}}}}return r;},sel:function(oid){var c=_atab.tdo.ga(oid);for(var i=0;i<c.length;i++){o=c[i];if(o.className.indexOf("hover")>-1){o.onclick();break;}}},inc:function(oid,dir){var c=_atab.tdo.ga(oid),i=1,p=0,n=0,o=0,s=0,h="hover",box=get(oid);if(c.length>1){for(i=0;i<c.length;i++){o=c[i];if(i<c.length-1){n=c[i+1];}else{n=c[0];}if(i>0){p=c[i-1];}else{p=c[c.length-1];}if(o.className.indexOf(h)>-1){if(dir>0&&n){n.className=h;o.className="";break;}else{if(-dir>0&&p){o.className="";p.className=h;break;}}}}if(dir<0&&p){n=p;}if(n==c[c.length-1]){box.scrollTop=Math.max(0,box.scrollHeight-(o.offsetHeight*4));}else{if(n==c[0]){box.scrollTop=0;}else{if(i<3){box.scrollTop=0;}else{if(i>c.length-3){box.scrollTop=Math.max(0,box.scrollHeight-(o.offsetHeight*4));}else{if(dir>0){if(o.offsetTop+o.offsetHeight*2>box.offsetHeight+box.scrollTop){box.scrollTop=o.offsetTop;}}else{if(o.offsetTop-o.offsetHeight<box.scrollTop){box.scrollTop=o.offsetTop-o.offsetHeight*3;}}}}}}}if(i==c.length){c[0].className="hover";box.scrollTop=0;}}},htkd:function(o,k){if(typeof(k)=="undefined"){k=window.event;}var w=_atw,ab=_atab,t="at16eatdr",iv=isVisible(t);if(iv){switch(k.keyCode){case 38:ab.tdo.inc(t,-1);cancelBubble(k);return false;case 40:ab.tdo.inc(t,1);cancelBubble(k);return false;case 13:ab.tdo.sel(t);cancelBubble(k);return false;}}return true;},filt:function(f,_60,_61,_62,_63,elt){var s=0,w=_atw,p=_62||"ati_",n=_63||"at16nms",elt=elt||"div",pn,ff=f!=""?f.replace(/\W+/g,"").replace(/ /g,"").toLowerCase():"";hide(n);if(_61){show(_61);}for(var k in _60){var o=get(p+k.replace("@","_")),kl=k.toLowerCase(),lkl=(_60[k]).toLowerCase(),d=0;if((kl.indexOf(f)>-1||kl.indexOf(ff)>-1||lkl.indexOf(ff)>-1||lkl.indexOf(f)>-1)){d=1;s++;}if(!pn&&o){pn=o.parentNode;}if(d){show(o);}else{hide(o);}}if(s&&pn){s=0;var _70=pn.getElementsByTagName(elt);for(var k in _70){if(_70[k].style&&_70[k].style.display=="block"){s++;}}}if(s===0){show(n);if(_61){hide(_61);}}if(f.replace(/ /g,"")==""){if(_61){hide(_61);}}},ipo:function(){var p=get("at16p");return p&&p.style.width=="502px";},opp:function(_72){var w=_atw,ab=_atab,p=get("at16p"),pp=get("at16pp"),off=_72;if(!addthis_do_ab){if(!ab.osta){var e=get("at_email"),d=function(s){if(w.hash.indexOf("#at"+s)===0){document.location.hash=w.hash="#";}};d("pro");d("opp");d("cle");d("clb");d("abc");e.url=_atr+(_ate.bro.mod!=2?"http://s7.addthis.com/js/250/static/r07/static/r07/static/r07/ab009.html":"http://s7.addthis.com/js/250/static/r07/static/r07/static/r07/ab-quirks009.html")+"?&hc="+_euc(w.conf.ui_header_color)+"&hb="+_euc(w.conf.ui_header_background)+"&br="+_euc(w.conf.ui_cobrand)+"&al="+w.conf.ui_language+"&t="+_euc(get("at_to").value)+"&pt="+_euc(w.conf.ui_email_to||"")+"&pf="+_euc(w.conf.ui_email_from||"")+(w.share.email_template?"&et="+_euc(w.share.email_template):"")+(w.share.email_vars?"&ev="+_euc(_ate.util.toKV(w.share.email_vars)):"")+"&f="+_euc(get("at_from").value)+"&n="+_euc(get("at_msg").value)+"&pn="+_euc((addthis_email_note||w.conf.ui_email_note||""))+(w.conf.data_track_clickback?"&ss=1":"")+"&url="+_euc(addthis_url)+"&tit="+_euc(addthis_title)+"&wpl="+_euc(document.location.href)+"&pub="+_euc(w.conf.username);e.innerHTML="<div id=\"at16abifc\" class=\"atiemode"+_ate.bro.mod+"\">"+"<iframe id=\"at16abif\""+(_ate.bro.mod==0?" style=\"height:370px\"":"")+" name=\"at16abif\" src=\""+e.url+"\" "+"scrollbar=\"no\" frameborder=\"0\" scrolling=\"no\"></iframe></div>";if(window.postMessage){if(_ate.bro.msi){window.attachEvent("onmessage",ab.pmh);}else{window.addEventListener("message",ab.pmh,false);}}else{if(ab.ifpp){clearInterval(ab.ifpp);}ab.ifpp=setInterval(function(){ab.ifp();},100);}ab.osta=true;off=_72=false;}if(_72===_1){var off=ab.ipo();get("at16abifc").style.width=off?"300px":"";}if(get("at16pit")){setWidth(p,off?300:502);get("at16pit").innerHTML="&"+(off?"r":"l")+"aquo;";}}else{off=(pp.style.display=="block");if(!ab.osta){w.ti=1000;var h=get("at15s"),hp=h&&h.parentNode,un,pw,_7f=0;if(hp){hp.removeChild(h);}w.evar();p.style.background=0;var md=div,msp=span,mlb=label,al=w.conf.ui_language,cs="</span>",ca="</a>",cd="</div>",min=function(i,e,v,z){return"<input id=\""+i+"\" name=\""+i+"\" class=\"atinp\" type=\""+(i.indexOf("pass")>-1?"password":"text")+"\" tabindex=\""+(_atw.ti++)+"\" "+(v?"value=\""+v+"\" ":"")+"size=\""+(z?z:30)+"\""+e+"/>";},cl="<div style=\"clear:both;\">"+cd,efr=function(i,l,v,z){return mlb(l,i)+min(i,"onfocus=\"_atw.rse(true);\"",v,z);};s=md("at_ab_error",0,null,"class=\"at_error\"")+w.lang(al,33)+cd+md("at16ppc")+md("at16pph")+w.lang(al,32)+":"+"<select id=\"at16pphs\" class=\"atinp\" tabindex=\""+(w.ti++)+"\" style=\"display:none\" onchange=\"_atab.swa(this.options[this.selectedIndex].value)\">";for(var k in ab.books){s+="<option value=\""+k+"\">"+ab.books[k]+"</option>";if(!_7f){_7f=_ate.cookie.rck("at-auth-"+k);}}s+="</select>"+cd+md("at16ppf",0)+"<div style=\"padding-bottom:6px;\">"+w.lang(al,27)+"."+cd;if(_7f){_7f=_7f.split("|");un=_7f[0];pw=_7f[1];}var lab=w.lang(al,19),pab=w.lang(al,29);lab=lab.charAt(0).toUpperCase()+lab.substr(1);pab=pab.charAt(0).toUpperCase()+pab.substr(1);s+=efr("at_ab_user",lab,un,20)+cl+efr("at_ab_pass",pab,pw,20)+md("at16abr")+"<input type=\"checkbox\" tabindex=\""+(w.ti++)+"\" id=\"at_remember\""+(_7f?" checked":"")+"> "+w.lang(al,30)+cd+"<p id=\"atsb\">"+"<input id=\"at16abs\" class=\"atbtn\" tabindex=\""+(w.ti++)+"\" type=\"submit\" value=\""+w.lang(al,31)+"\" onclick=\"return _atab.lda()\"/>"+"<input id=\"at16abc\" class=\"atbtn atrse\" tabindex=\""+(w.ti++)+"\" type=\"submit\" value=\""+w.lang(al,26)+"\" onclick=\"_atab.rsp();return false\"/>"+"</p>"+"<div id=\"at_signin_loading\" class=\"at_loading\" style=\"display:none;\"><img src=\""+_atr+"/images/redloading.gif\" width=\"16\" height=\"16\" alt=\"loading...\"/> "+w.lang(al,39)+"..."+cd+cd;s+=md("at16ppa",0,0,(_ate.bro.mod==2?"style=\"width:164px\"":""))+cd+"<a id=\"at16ppso\" href=\"#\" onclick=\"return _atab.daua(this);\">"+w.lang(al,38)+ca+md("at16ppb")+md("at16ep");for(var k in ab.books){s+="<a class=\"at15t at15t_"+k+(k.indexOf("mail")==-1?"mail":"")+"\" href=\"#\" onclick=\"_atab.swa('"+k+"');\">"+ab.books[k]+ca;}s+=cd+cd+cd;pp.innerHTML=s;if(off){hide(pp);}else{show(pp);}setWidth(p,off?300:502);w.osta=true;ab.plda();}if(off!==false){_ate.com("opp");}}return false;},rsp:function(){var hi=["at16ppa","at16ppso","at16pphs","at16ppf"];for(var k in hi){hide(hi[k]);}show("at16ppb");_atw.rse(true);},abtd:function(){var w=_atw,off=!_atab.ipo(),sd=off?hide:show;sd("at16ppc");sd("at16abc",1,1);sd("at16abr");sd("at16abs",1,1);sd("at_ab_user");sd("at_ab_pass");},daua:function(_9a){var w=_atw,ab=_atab,c=w.data.contacts,s=_9a.firstChild.nodeValue.split(" ").pop(),re=[],td=get("at16eatdr");for(var k in ab.books){if(ab.books[k]==s){if(_ate.cookie.rck("at-auth-sess-"+k)){_ate.cookie.kck("at-auth-sess-"+k);}if(td){var cl=td.getElementsByTagName("A"),re=[];for(var i=0;i<cl.length;i++){if(cl[i].className.indexOf(k)>-1){re.push(cl[i]);}}}w.data.contacts[k]=null;if(w.data.auth[s]){_atab.abdata(c[s]);}w.data.auth[k]=null;ab.rsp();break;}}for(var k in c.origin){if(c.origin[k]==s){delete c.origin[k];delete c.all[c.origin[k]];}}for(i=0;i<re.length;i++){td.removeChild(re[i]);}if(td&&td.getElementsByTagName("A").length==0){td.innerHTML="";td.style.border="";}},aua:function(b){var w=_atw,u=get("at_ab_user"),p=get("at_ab_pass"),s=get("at16pphs");show(s);show("at16ppf");hide("at16ppa");hide("at16ppso");hide("at16ppb");s.value=b;if(w.data.auth&&w.data.auth[b]){var a=w.data.auth[b];u.value=a.u;p.value=a.p;}else{var a=_ate.cookie.rck("at-auth-"+b);if(a){a=a.split("|");u.value=a[0];p.value=a[1];}else{u.value="";p.value="";}}},swa:function(b){var a=_atab,c=_atw.data.contacts;if(c&&c[b]){a.abdata(c[b]);}else{a.aua(b);}},plda:function(){for(var k in _atab.books){if(_ate.cookie.rck("at-auth-sess-"+k)){var _ae=_ate.cookie.rck("at-auth-"+k);if(_ae){_ae=_ae.split("|");var un=_ae[0],pw=_ae[1];_atab.lda(k,un,pw);}}}},lda:function(fbk,u,p){var w=_atw,c=w.data.contacts,s=get("at16pphs"),uf=get("at_ab_user"),pf=get("at_ab_pass"),pp=get("at16pp"),u=u||uf.value,p=p||pf.value,v=fbk||s.options[s.selectedIndex].value;w.rse();if(!fbk){if(u==""||p==""){var e=("at_ab_error"),al=w.conf.ui_language;if(u==""){w.err(null,uf,e);}if(p==""){w.err(null,pp,e);}return false;}if(get("at_remember").checked){_ate.cookie.sck("at-auth-"+v,u+"|"+p);_ate.cookie.sck("at-auth-sess-"+v,1,1);}else{_ate.cookie.kck("at-auth-"+v);_ate.cookie.kck("at-auth-sess"+v);}}if(c&&c[v]){_atab.abdata(c[v],!!fbk);}else{show("at_signin_loading");var d=document,o=d.ce("script");o.src="http://ws.addthis.com/share/2.1/addrs.json?suppress_response_codes=true&u="+_euc(u)+"&p="+_euc(p)+"&num=500&from="+_euc(v)+"&callback=_atab.abdata"+(fbk?"bk":"");d.gn("head")[0].appendChild(o);}},ato:function(o){var w=_atw,t=get("at_to"),a=o.firstChild.nodeValue,aa=a.split(" <"),ne=aa.length?aa[1]:a,es=t.value.replace(/[;\n]/g,",").split(","),le=leo=es.pop(),lbp;if(_ate.trim(le)==""){le=leo=es.pop();}if(a.indexOf("<")!==-1){a="\""+a.replace(/ </g,"\" <");}if(le){lbp=le.indexOf("<");if(lbp>-1){le=le.substr(lbp+1,le.length-lbp).replace(">","");}if(validateEmail(le)){es.push(leo.charAt(0)==" "?leo.substr(1):leo);}}if(t.value.indexOf(ne)==-1){es.push(a);}hide("at16eatdr");if(w.get("at_email").style.display=="block"){t.focus();}t.value=es.join(", ")+", ";return false;},abdatabk:function(r){_atab.abdata(r,true);},abdata:function(r,f){var w=_atw,ab=_atab,ac=get("at16ppa"),so=get("at16ppso"),_cf=window.addthis_do_ab&&!f;hide("at_signin_loading");if(r.error){if(_cf){w.err(null,get("at_ab_user"),"at_ab_error");w.err(null,get("at_ab_pass"),"at_ab_error");}}else{if(_cf){hide("at16ppb");hide("at16ppf");}var c=r.contacts,b=r.channel,f=1,as="",s="",td=get("at16eatdr"),u=get("at_ab_user"),p=get("at_ab_pass");if(_cf){if(!r.cache){_ate.track.cev("aba",b);}so.firstChild.nodeValue=w.lang(w.conf.ui_language,38)+" "+ab.books[b];show(so);show(ac);w.data.auth[b]={u:u.value,p:p.value};}c.sort(function(a,b){var a=((a.name||a.allPops[0].address||"")+"").toUpperCase(),b=((b.name||b.allPops[0].address||"")+"").toUpperCase();return((a==b)?0:((a>b)?1:-1));});for(var i=0;i<c.length;i++){var _da=c[i].allPops;if(_da.length){for(var j=0;j<_da.length;j++){var d=_da[j],n=d.displayName,a=d.address;s+="<a href=\"#\" onclick=\"return _atab.ato(this);\">"+n+" &lt;"+a+"&gt;</a>";w.data.contacts.all[a]=n;w.data.contacts.origin[a]=b;}}}w.data.contacts[b]=r;w.data.contacts[b].cache=true;var cns=[];for(var a in w.data.contacts.all){cns.push({id:a,name:w.data.contacts.all[a]});}cns.sort(function(a,b){return a.name>b.name?1:(a.name<b.name?-1:0);});for(i=0;i<cns.length;i++){if(typeof(cns[i])=="object"){var a=cns[i].id;as+="<a id=\"_ataddr"+(a.replace("@","_"))+"\" class=\"addthis_data_"+w.data.contacts.origin[a]+"\" href=\"#\" onclick=\"return _atab.ato(this);\">"+w.data.contacts.all[a]+" &lt;"+a+"&gt;</a>";}}if(td){td.innerHTML=as;if(as!=""){td.style.border="1px solid #ccc";}}if(_cf){show("at16pphs");get("at16pphs").value=b;ac.innerHTML=s;}}},hash:window.location.hash,ifpp:null,ifp:function(_e2){var w=_atw,m=window.location.hash;if(m&&m.length>3&&m!=w.hash){m=m.substr(3);if(m.indexOf("ssh")==0){return;}if(!w.hash.length||w.hash==""){w.hash="#";}if(_atab.ham(m)){window.location.hash=w.hash;}}},pmh:function(e){if(e&&e.origin&&e.origin.substr(e.origin.length-12)=="http://s7.addthis.com/js/250/static/r07/static/r07/.addthis.com"){_atab.ham(e.data);}},ham:function(m){var w=_atw,p=0,ab=_atab;switch(m){case"clb":w.clb();p=1;break;case"rse":w.rse();p=1;break;case"hip":hide("at16pit",1);p=1;break;case"rsp":w.rsp();p=1;break;case"opp":ab.opp();p=1;break;case"pro":ab.opp(true);p=1;w.cle();w.pro();break;case"cle":ab.opp();p=1;_ate.as("more");break;case"cef":p=1;w.cef();break;}return p;}};_atw.pla();}})();